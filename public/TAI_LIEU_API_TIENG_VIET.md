# TÃ i Liá»‡u API Trung TÃ¢m Tiáº¿ng Anh - HÆ°á»›ng Dáº«n Chi Tiáº¿t

## Má»¥c Lá»¥c

1. [XÃ¡c Thá»±c NgÆ°á»i DÃ¹ng](#xÃ¡c-thá»±c-ngÆ°á»i-dÃ¹ng)
2. [Quáº£n LÃ½ Lá»›p Há»c](#quáº£n-lÃ½-lá»›p-há»c)
3. [Quáº£n LÃ½ NgÆ°á»i DÃ¹ng](#quáº£n-lÃ½-ngÆ°á»i-dÃ¹ng)
4. [Quáº£n LÃ½ Äiá»ƒm Danh](#quáº£n-lÃ½-Ä‘iá»ƒm-danh)
5. [Quáº£n LÃ½ GiÃ¡o ViÃªn](#quáº£n-lÃ½-giÃ¡o-viÃªn)
6. [Quáº£n LÃ½ Phá»¥ Huynh](#quáº£n-lÃ½-phá»¥-huynh)
7. [Quáº£n LÃ½ Há»c Sinh](#quáº£n-lÃ½-há»c-sinh)
8. [Luá»“ng Sá»­ Dá»¥ng API](#luá»“ng-sá»­-dá»¥ng-api)
9. [Tá»•ng Há»£p Quyá»n Theo Vai TrÃ²](#tá»•ng-há»£p-quyá»n-theo-vai-trÃ²)

---

1. XÃ¡c Thá»±c NgÆ°á»i DÃ¹ng (3 APIs)
   ÄÄƒng nháº­p há»‡ thá»‘ng: Nháº­n JWT token
   Xem thÃ´ng tin cÃ¡ nhÃ¢n: Profile cá»§a user hiá»‡n táº¡i
   Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n: Sá»­a profile

2. Quáº£n LÃ½ Lá»›p Há»c (7 APIs)
   Táº¡o lá»›p há»c má»›i: Admin táº¡o lá»›p vá»›i Ä‘áº§y Ä‘á»§ thÃ´ng tin
   Láº¥y danh sÃ¡ch táº¥t cáº£ lá»›p: Vá»›i bá»™ lá»c theo tÃªn, nÄƒm, khá»‘i
   Xem chi tiáº¿t lá»›p: ThÃ´ng tin Ä‘áº§y Ä‘á»§ cá»§a má»™t lá»›p
   Cáº­p nháº­t thÃ´ng tin lá»›p: Sá»­a thÃ´ng tin lá»›p há»c
   ÄÃ³ng lá»›p há»c: VÃ´ hiá»‡u hÃ³a lá»›p
   Láº¥y giÃ¡o viÃªn kháº£ dá»¥ng: Äá»ƒ phÃ¢n cÃ´ng
   Láº¥y há»c sinh kháº£ dá»¥ng: Äá»ƒ thÃªm vÃ o lá»›p

3. Quáº£n LÃ½ NgÆ°á»i DÃ¹ng (1 API)
   Láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng: Vá»›i phÃ¢n trang vÃ  bá»™ lá»c

4. Quáº£n LÃ½ Äiá»ƒm Danh (4 APIs)
   Táº¡o buá»•i Ä‘iá»ƒm danh má»›i: Cho má»™t lá»›p há»c cá»¥ thá»ƒ
   Thá»±c hiá»‡n Ä‘iá»ƒm danh: ÄÃ¡nh dáº¥u cÃ³ máº·t/váº¯ng máº·t (tá»± Ä‘á»™ng update Payment & TeacherWage)
   Láº¥y danh sÃ¡ch Ä‘iá»ƒm danh: Lá»‹ch sá»­ Ä‘iá»ƒm danh cá»§a lá»›p
   XÃ³a báº£n ghi Ä‘iá»ƒm danh: Chá»‰ Admin

5. Quáº£n LÃ½ GiÃ¡o ViÃªn (5 APIs)
   Táº¡o tÃ i khoáº£n giÃ¡o viÃªn má»›i
   Láº¥y danh sÃ¡ch táº¥t cáº£ giÃ¡o viÃªn
   Láº¥y thÃ´ng tin chi tiáº¿t giÃ¡o viÃªn
   Cáº­p nháº­t thÃ´ng tin giÃ¡o viÃªn
   XÃ³a tÃ i khoáº£n giÃ¡o viÃªn

6. Quáº£n LÃ½ Phá»¥ Huynh (4 APIs)
   Táº¡o tÃ i khoáº£n phá»¥ huynh má»›i
   Cáº­p nháº­t quan há»‡ phá»¥ huynh-con: Add/remove con
   Xem thÃ´ng tin lá»›p há»c cá»§a con
   Xem cÃ¡c khoáº£n thanh toÃ¡n chÆ°a hoÃ n thÃ nh

7. Quáº£n LÃ½ Há»c Sinh (5 APIs)
   Táº¡o tÃ i khoáº£n há»c sinh má»›i
   Láº¥y danh sÃ¡ch táº¥t cáº£ há»c sinh
   Láº¥y thÃ´ng tin chi tiáº¿t há»c sinh
   ÄÄƒng kÃ½ há»c sinh vÃ o lá»›p: Vá»›i giáº£m giÃ¡ tÃ¹y chá»n
   RÃºt há»c sinh khá»i lá»›p: Withdraw tá»« cÃ¡c lá»›p

ğŸ”„ Luá»“ng Sá»­ Dá»¥ng API:
GiÃ¡o ViÃªn (HÃ ng ngÃ y):
ÄÄƒng nháº­p â†’ Xem lá»›p â†’ Táº¡o Ä‘iá»ƒm danh â†’ ÄÃ¡nh dáº¥u há»c sinh â†’ Xem lá»‹ch sá»­
Admin (Quáº£n lÃ½):
ÄÄƒng nháº­p â†’ Táº¡o giÃ¡o viÃªn â†’ Táº¡o há»c sinh â†’ Táº¡o lá»›p â†’ ÄÄƒng kÃ½ há»c sinh â†’ Theo dÃµi
Phá»¥ Huynh (Theo dÃµi):
ÄÄƒng nháº­p â†’ Xem lá»›p cá»§a con â†’ Kiá»ƒm tra thanh toÃ¡n

## XÃ¡c Thá»±c NgÆ°á»i DÃ¹ng

### 1. ÄÄƒng Nháº­p Há»‡ Thá»‘ng

**ÄÆ°á»ng dáº«n:** `POST /v1/api/login`  
**MÃ´ táº£:** XÃ¡c thá»±c thÃ´ng tin ngÆ°á»i dÃ¹ng vÃ  nháº­n token JWT  
**Quyá»n truy cáº­p:** CÃ´ng khai (Táº¥t cáº£ ngÆ°á»i dÃ¹ng)  
**Äáº§u vÃ o:** Dá»¯ liá»‡u form

- `email` (chuá»—i, báº¯t buá»™c): Email ngÆ°á»i dÃ¹ng
- `password` (chuá»—i, báº¯t buá»™c): Máº­t kháº©u

**VÃ­ dá»¥ yÃªu cáº§u:**

```
POST /v1/api/login
Content-Type: application/x-www-form-urlencoded

Äáº§u vÃ o : email vÃ  password
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "ÄÄƒng nháº­p thÃ nh cÃ´ng",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "684aee9c10e24b616dccdf74",
    "email": "user1@gmail.com",
    "role": "Student",
    "name": "Nguyá»…n VÄƒn A"
  }
}
```

### 2. Xem ThÃ´ng Tin CÃ¡ NhÃ¢n

**ÄÆ°á»ng dáº«n:** `GET /v1/api/profile`  
**MÃ´ táº£:** Láº¥y thÃ´ng tin cÃ¡ nhÃ¢n cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i  
**Quyá»n truy cáº­p:** Táº¥t cáº£ ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p  
**Headers:** `Authorization: Bearer <token>`

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y thÃ´ng tin profile thÃ nh cÃ´ng",
  "data": {
    "id": "684aee9c10e24b616dccdf74",
    "email": "user1@gmail.com",
    "name": "Nguyá»…n VÄƒn A",
    "role": "Student",
    "gender": "Nam",
    "phoneNumber": "0912345678",
    "address": "123 ÄÆ°á»ng ABC, TP.HCM"
  }
}
```

### 3. Cáº­p Nháº­t ThÃ´ng Tin CÃ¡ NhÃ¢n

**ÄÆ°á»ng dáº«n:** `PATCH /v1/api/profile`  
**MÃ´ táº£:** Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n cá»§a ngÆ°á»i dÃ¹ng  
**Quyá»n truy cáº­p:** Táº¥t cáº£ ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p  
**Headers:** `Authorization: Bearer <token>`  
**Äáº§u vÃ o:** Dá»¯ liá»‡u form (tÃ¹y chá»n)

- `name` (chuá»—i): Há» vÃ  tÃªn
- `gender` (chuá»—i): Giá»›i tÃ­nh
- `phoneNumber` (chuá»—i): Sá»‘ Ä‘iá»‡n thoáº¡i
- `address` (chuá»—i): Äá»‹a chá»‰

---

## Quáº£n LÃ½ Lá»›p Há»c

### 1. Táº¡o Lá»›p Há»c Má»›i

**ÄÆ°á»ng dáº«n:** `POST /v1/api/class`  
**MÃ´ táº£:** Táº¡o má»™t lá»›p há»c má»›i trong há»‡ thá»‘ng  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "className": "3A1",
  "year": 2025,
  "grade": 3,
  "isAvailable": true,
  "feePerLesson": 100000,
  "schedule": {
    "startDate": "19/07/2025",
    "endDate": "31/12/2025",
    "daysOfLessonInWeek": [2, 4, 6]
  },
  "teacherId": "684ba6d8067cbc595e427fb0",
  "studentList": ["684ba74d067cbc595e427fbc", "684ba70e067cbc595e427fb4"]
}
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Táº¡o lá»›p há»c thÃ nh cÃ´ng",
  "data": {
    "_id": "684c060dae07023012bcfe22",
    "className": "3A1",
    "year": 2025,
    "grade": 3,
    "isAvailable": true,
    "feePerLesson": 100000,
    "schedule": {
      "startDate": "2025-07-19T00:00:00.000Z",
      "endDate": "2025-12-31T00:00:00.000Z",
      "daysOfLessonInWeek": [2, 4, 6]
    },
    "teacherId": "684ba6d8067cbc595e427fb0",
    "studentList": ["684ba74d067cbc595e427fbc", "684ba70e067cbc595e427fb4"],
    "createdAt": "2025-06-20T10:00:00.000Z"
  }
}
```

### 2. Láº¥y Danh SÃ¡ch Táº¥t Cáº£ Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `GET /v1/api/class`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch táº¥t cáº£ lá»›p há»c vá»›i bá»™ lá»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ truy váº¥n:**

- `className` (chuá»—i, tÃ¹y chá»n): Lá»c theo tÃªn lá»›p
- `year` (sá»‘, tÃ¹y chá»n): Lá»c theo nÄƒm há»c
- `grade` (sá»‘, tÃ¹y chá»n): Lá»c theo khá»‘i lá»›p

**VÃ­ dá»¥ yÃªu cáº§u:**

```
GET /v1/api/class?className=3A&year=2025&grade=3
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch lá»›p há»c thÃ nh cÃ´ng",
  "data": [
    {
      "_id": "684c060dae07023012bcfe22",
      "className": "3A1",
      "year": 2025,
      "grade": 3,
      "isAvailable": true,
      "teacherId": {
        "name": "Nguyá»…n VÄƒn GiÃ¡o",
        "email": "teacher1@gmail.com"
      },
      "studentCount": 25,
      "feePerLesson": 100000
    }
  ],
  "totalClasses": 1
}
```

### 3. Xem Chi Tiáº¿t Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `GET /v1/api/class/:classId`  
**MÃ´ táº£:** Láº¥y thÃ´ng tin chi tiáº¿t cá»§a má»™t lá»›p há»c cá»¥ thá»ƒ  
**Quyá»n truy cáº­p:** Admin, GiÃ¡o viÃªn (chá»‰ lá»›p Ä‘Æ°á»£c phÃ¢n cÃ´ng)  
**Headers:** `Authorization: Bearer <token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `classId` (chuá»—i, báº¯t buá»™c): ID cá»§a lá»›p há»c

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y thÃ´ng tin lá»›p há»c thÃ nh cÃ´ng",
  "data": {
    "_id": "684c060dae07023012bcfe22",
    "className": "3A1",
    "year": 2025,
    "grade": 3,
    "isAvailable": true,
    "feePerLesson": 100000,
    "schedule": {
      "startDate": "2025-07-19T00:00:00.000Z",
      "endDate": "2025-12-31T00:00:00.000Z",
      "daysOfLessonInWeek": [2, 4, 6]
    },
    "teacherId": {
      "_id": "684ba6d8067cbc595e427fb0",
      "name": "Nguyá»…n VÄƒn GiÃ¡o",
      "email": "teacher1@gmail.com"
    },
    "studentList": [
      {
        "_id": "684ba74d067cbc595e427fbc",
        "name": "Nguyá»…n VÄƒn A",
        "email": "student1@gmail.com"
      }
    ]
  }
}
```

### 4. Cáº­p Nháº­t ThÃ´ng Tin Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `PATCH /v1/api/class/:classId`  
**MÃ´ táº£:** Cáº­p nháº­t thÃ´ng tin cá»§a lá»›p há»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `classId` (chuá»—i, báº¯t buá»™c): ID cá»§a lá»›p há»c

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "className": "4A3",
  "year": 2025,
  "grade": 4,
  "isAvailable": true,
  "feePerLesson": 200000,
  "teacherId": "684ba6d8067cbc595e427fb0",
  "studentList": {
    "studentIds": ["684aee9c10e24b616dccdf76", "684ba70e067cbc595e427fb4"],
    "action": "set"
  },
  "schedule": {
    "startDate": "10/02/2025",
    "endDate": "29/07/2025",
    "daysOfLessonInWeek": [2, 3, 5]
  }
}
```

### 5. ÄÃ³ng Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `DELETE /v1/api/class/:classId`  
**MÃ´ táº£:** ÄÃ³ng/vÃ´ hiá»‡u hÃ³a má»™t lá»›p há»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `classId` (chuá»—i, báº¯t buá»™c): ID cá»§a lá»›p há»c

### 6. Láº¥y Danh SÃ¡ch GiÃ¡o ViÃªn Kháº£ Dá»¥ng

**ÄÆ°á»ng dáº«n:** `GET /v1/api/classes/available-teachers`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch giÃ¡o viÃªn cÃ³ thá»ƒ phÃ¢n cÃ´ng cho lá»›p há»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ truy váº¥n:**

- `excludeClassId` (chuá»—i, tÃ¹y chá»n): Loáº¡i trá»« giÃ¡o viÃªn Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n cÃ´ng cho lá»›p nÃ y

### 7. Láº¥y Danh SÃ¡ch Há»c Sinh Kháº£ Dá»¥ng

**ÄÆ°á»ng dáº«n:** `GET /v1/api/classes/available-students`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch há»c sinh cÃ³ thá»ƒ thÃªm vÃ o lá»›p há»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ truy váº¥n:**

- `excludeClassId` (chuá»—i, tÃ¹y chá»n): Loáº¡i trá»« há»c sinh Ä‘Ã£ cÃ³ trong lá»›p nÃ y

---

## Quáº£n LÃ½ NgÆ°á»i DÃ¹ng

### 1. Láº¥y Danh SÃ¡ch NgÆ°á»i DÃ¹ng

**ÄÆ°á»ng dáº«n:** `GET /v1/api/user/`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch táº¥t cáº£ ngÆ°á»i dÃ¹ng vá»›i phÃ¢n trang vÃ  bá»™ lá»c  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ truy váº¥n:**

- `page` (sá»‘, tÃ¹y chá»n, máº·c Ä‘á»‹nh: 1): Sá»‘ trang
- `limit` (sá»‘, tÃ¹y chá»n, máº·c Ä‘á»‹nh: 10): Sá»‘ báº£n ghi má»—i trang
- `email` (chuá»—i, tÃ¹y chá»n): Lá»c theo email
- `name` (chuá»—i, tÃ¹y chá»n): Lá»c theo tÃªn
- `role` (chuá»—i, tÃ¹y chá»n): Lá»c theo vai trÃ² (Admin, Teacher, Student, Parent)
- `sortBy` (chuá»—i, tÃ¹y chá»n): TrÆ°á»ng sáº¯p xáº¿p
- `sortOrder` (chuá»—i, tÃ¹y chá»n): Thá»© tá»± sáº¯p xáº¿p (asc, desc)

**VÃ­ dá»¥ yÃªu cáº§u:**

```
GET /v1/api/user/?page=1&limit=10&email=user&role=Teacher
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng thÃ nh cÃ´ng",
  "data": [
    {
      "_id": "684ba6d8067cbc595e427fb0",
      "email": "teacher1@gmail.com",
      "name": "Nguyá»…n VÄƒn GiÃ¡o",
      "role": "Teacher",
      "gender": "Nam",
      "phoneNumber": "0912345678",
      "createdAt": "2025-06-20T10:00:00.000Z"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 3,
    "totalUsers": 25,
    "hasNext": true,
    "hasPrev": false
  }
}
```

---

## Quáº£n LÃ½ Äiá»ƒm Danh

### 1. Táº¡o Buá»•i Äiá»ƒm Danh Má»›i

**ÄÆ°á»ng dáº«n:** `POST /v1/api/attendance/class/:classId`  
**MÃ´ táº£:** Táº¡o buá»•i Ä‘iá»ƒm danh má»›i cho lá»›p há»c (táº¥t cáº£ há»c sinh máº·c Ä‘á»‹nh cÃ³ máº·t)  
**Quyá»n truy cáº­p:** GiÃ¡o viÃªn, Admin  
**Headers:** `Authorization: Bearer <token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `classId` (chuá»—i, báº¯t buá»™c): ID cá»§a lá»›p há»c  
  **Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "date": "20/06/2025",
  "lessonNumber": 1
}
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Táº¡o buá»•i Ä‘iá»ƒm danh thÃ nh cÃ´ng",
  "data": {
    "_id": "68554a7dee73d9a73e547469",
    "classId": "684c060dae07023012bcfe22",
    "date": "2025-06-20T00:00:00.000Z",
    "lessonNumber": 1,
    "students": [
      {
        "studentId": "684ba74d067cbc595e427fbc",
        "isAbsent": false
      },
      {
        "studentId": "684ba70e067cbc595e427fb4",
        "isAbsent": false
      }
    ],
    "createdAt": "2025-06-20T10:00:00.000Z"
  }
}
```

### 2. Thá»±c Hiá»‡n Äiá»ƒm Danh (ÄÃ¡nh Dáº¥u Há»c Sinh)

**ÄÆ°á»ng dáº«n:** `PATCH /v1/api/attendance/:attendanceId/mark`  
**MÃ´ táº£:** ÄÃ¡nh dáº¥u tráº¡ng thÃ¡i cÃ³ máº·t/váº¯ng máº·t cho há»c sinh (tá»± Ä‘á»™ng cáº­p nháº­t báº£n ghi thanh toÃ¡n vÃ  lÆ°Æ¡ng giÃ¡o viÃªn)  
**Quyá»n truy cáº­p:** GiÃ¡o viÃªn, Admin  
**Headers:** `Authorization: Bearer <token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `attendanceId` (chuá»—i, báº¯t buá»™c): ID cá»§a báº£n ghi Ä‘iá»ƒm danh  
  **Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "students": [
    {
      "studentId": "684aee9c10e24b616dccdf76",
      "isAbsent": false
    },
    {
      "studentId": "684ba70e067cbc595e427fb4",
      "isAbsent": true
    }
  ]
}
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Äiá»ƒm danh thÃ nh cÃ´ng",
  "data": {
    "_id": "68554a7dee73d9a73e547469",
    "classId": "684c060dae07023012bcfe22",
    "date": "2025-06-20T00:00:00.000Z",
    "lessonNumber": 1,
    "students": [
      {
        "studentId": {
          "_id": "684aee9c10e24b616dccdf76",
          "name": "Nguyá»…n VÄƒn A"
        },
        "isAbsent": false
      },
      {
        "studentId": {
          "_id": "684ba70e067cbc595e427fb4",
          "name": "Tráº§n Thá»‹ B"
        },
        "isAbsent": true
      }
    ],
    "updatedAt": "2025-06-20T11:00:00.000Z"
  }
}
```

### 3. Láº¥y Danh SÃ¡ch Äiá»ƒm Danh Cá»§a Lá»›p

**ÄÆ°á»ng dáº«n:** `GET /v1/api/attendance/class/:classId`  
**MÃ´ táº£:** Láº¥y lá»‹ch sá»­ Ä‘iá»ƒm danh cá»§a má»™t lá»›p há»c cá»¥ thá»ƒ  
**Quyá»n truy cáº­p:** GiÃ¡o viÃªn, Admin  
**Headers:** `Authorization: Bearer <token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `classId` (chuá»—i, báº¯t buá»™c): ID cá»§a lá»›p há»c  
  **Tham sá»‘ truy váº¥n:**
- `page` (sá»‘, tÃ¹y chá»n, máº·c Ä‘á»‹nh: 1): Sá»‘ trang
- `limit` (sá»‘, tÃ¹y chá»n, máº·c Ä‘á»‹nh: 10): Sá»‘ báº£n ghi má»—i trang
- `startDate` (chuá»—i, tÃ¹y chá»n): Lá»c tá»« ngÃ y (DD/MM/YYYY)
- `endDate` (chuá»—i, tÃ¹y chá»n): Lá»c Ä‘áº¿n ngÃ y (DD/MM/YYYY)

**VÃ­ dá»¥ yÃªu cáº§u:**

```
GET /v1/api/attendance/class/684c060dae07023012bcfe22?page=1&limit=5&startDate=01/06/2025
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch Ä‘iá»ƒm danh lá»›p thÃ nh cÃ´ng",
  "data": [
    {
      "_id": "68554a7dee73d9a73e547469",
      "classId": {
        "className": "3A1",
        "grade": 3
      },
      "date": "2025-06-20T00:00:00.000Z",
      "lessonNumber": 1,
      "students": [
        {
          "studentId": {
            "userId": {
              "name": "Nguyá»…n VÄƒn A"
            }
          },
          "isAbsent": false
        }
      ],
      "createdAt": "2025-06-20T10:00:00.000Z"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 3,
    "totalRecords": 25
  }
}
```

### 4. XÃ³a Báº£n Ghi Äiá»ƒm Danh

**ÄÆ°á»ng dáº«n:** `DELETE /v1/api/attendance/:attendanceId`  
**MÃ´ táº£:** XÃ³a má»™t báº£n ghi Ä‘iá»ƒm danh  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Tham sá»‘ Ä‘Æ°á»ng dáº«n:**

- `attendanceId` (chuá»—i, báº¯t buá»™c): ID cá»§a báº£n ghi Ä‘iá»ƒm danh

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "XÃ³a Ä‘iá»ƒm danh thÃ nh cÃ´ng"
}
```

---

## Quáº£n LÃ½ GiÃ¡o ViÃªn

### 1. Táº¡o TÃ i Khoáº£n GiÃ¡o ViÃªn Má»›i

**ÄÆ°á»ng dáº«n:** `POST /v1/api/teachers/`  
**MÃ´ táº£:** Táº¡o tÃ i khoáº£n giÃ¡o viÃªn má»›i trong há»‡ thá»‘ng  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "email": "teacher2@gmail.com",
  "passwordBeforeHash": "password123",
  "name": "Tráº§n VÄƒn GiÃ¡o",
  "gender": "Nam",
  "phoneNumber": "0912345678",
  "address": "456 ÄÆ°á»ng GiÃ¡o ViÃªn, TP.HCM",
  "specialization": "Tiáº¿ng Anh",
  "experience": 5
}
```

### 2. Láº¥y Danh SÃ¡ch Táº¥t Cáº£ GiÃ¡o ViÃªn

**ÄÆ°á»ng dáº«n:** `GET /v1/api/teachers`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch táº¥t cáº£ giÃ¡o viÃªn  
**Quyá»n truy cáº­p:** Admin, Há»c sinh (thÃ´ng tin háº¡n cháº¿)  
**Headers:** `Authorization: Bearer <token>`

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch giÃ¡o viÃªn thÃ nh cÃ´ng",
  "data": [
    {
      "_id": "684ba6d8067cbc595e427fb0",
      "userId": {
        "name": "Nguyá»…n VÄƒn GiÃ¡o",
        "email": "teacher1@gmail.com"
      },
      "specialization": "Tiáº¿ng Anh",
      "experience": 3,
      "currentClasses": ["3A1", "4B2"]
    }
  ]
}
```

### 3. Láº¥y ThÃ´ng Tin Chi Tiáº¿t GiÃ¡o ViÃªn

**ÄÆ°á»ng dáº«n:** `GET /v1/api/teachers/:teacherId`  
**MÃ´ táº£:** Láº¥y thÃ´ng tin chi tiáº¿t cá»§a má»™t giÃ¡o viÃªn cá»¥ thá»ƒ  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`

### 4. Cáº­p Nháº­t ThÃ´ng Tin GiÃ¡o ViÃªn

**ÄÆ°á»ng dáº«n:** `PATCH /v1/api/teachers/:teacherId`  
**MÃ´ táº£:** Cáº­p nháº­t thÃ´ng tin cá»§a giÃ¡o viÃªn  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`

### 5. XÃ³a TÃ i Khoáº£n GiÃ¡o ViÃªn

**ÄÆ°á»ng dáº«n:** `DELETE /v1/api/teachers/:teacherId`  
**MÃ´ táº£:** XÃ³a tÃ i khoáº£n giÃ¡o viÃªn khá»i há»‡ thá»‘ng  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`

---

## Quáº£n LÃ½ Phá»¥ Huynh

### 1. Táº¡o TÃ i Khoáº£n Phá»¥ Huynh Má»›i

**ÄÆ°á»ng dáº«n:** `POST /v1/api/parents`  
**MÃ´ táº£:** Táº¡o tÃ i khoáº£n phá»¥ huynh má»›i trong há»‡ thá»‘ng  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "email": "parent1@gmail.com",
  "passwordBeforeHash": "password123",
  "name": "VÃµ VÄƒn Phá»¥ Huynh",
  "gender": "Nam",
  "phoneNumber": "0748278432",
  "address": "789 ÄÆ°á»ng Phá»¥ Huynh, TP.HCM",
  "childId": null,
  "canSeeTeacher": false
}
```

### 2. Cáº­p Nháº­t Quan Há»‡ Phá»¥ Huynh-Con

**ÄÆ°á»ng dáº«n:** `PATCH /v1/api/parents/:parentId/children`  
**MÃ´ táº£:** ThÃªm hoáº·c xÃ³a con khá»i tÃ i khoáº£n phá»¥ huynh  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "action": "add",
  "studentId": ["684aee9c10e24b616dccdf76"]
}
```

**CÃ¡c hÃ nh Ä‘á»™ng kháº£ dá»¥ng:**

- `add`: ThÃªm con vÃ o tÃ i khoáº£n phá»¥ huynh
- `remove`: XÃ³a con khá»i tÃ i khoáº£n phá»¥ huynh

### 3. Xem ThÃ´ng Tin Lá»›p Há»c Cá»§a Con

**ÄÆ°á»ng dáº«n:** `GET /v1/api/parents/:parentId/classes`  
**MÃ´ táº£:** Láº¥y thÃ´ng tin vá» cÃ¡c lá»›p há»c mÃ  con Ä‘ang tham gia  
**Quyá»n truy cáº­p:** Phá»¥ huynh, Admin  
**Headers:** `Authorization: Bearer <token>`

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y thÃ´ng tin lá»›p há»c cá»§a con thÃ nh cÃ´ng",
  "data": [
    {
      "child": {
        "_id": "684aee9c10e24b616dccdf76",
        "name": "Nguyá»…n VÄƒn Con"
      },
      "classes": [
        {
          "_id": "684c060dae07023012bcfe22",
          "className": "3A1",
          "grade": 3,
          "teacher": {
            "name": "Nguyá»…n VÄƒn GiÃ¡o"
          },
          "schedule": {
            "daysOfLessonInWeek": [2, 4, 6]
          }
        }
      ]
    }
  ]
}
```

### 4. Xem CÃ¡c Khoáº£n Thanh ToÃ¡n ChÆ°a HoÃ n ThÃ nh

**ÄÆ°á»ng dáº«n:** `GET /v1/api/parents/:parentId/payments/unpaid`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch cÃ¡c khoáº£n thanh toÃ¡n chÆ°a hoÃ n thÃ nh cá»§a con  
**Quyá»n truy cáº­p:** Phá»¥ huynh, Admin  
**Headers:** `Authorization: Bearer <token>`

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch thanh toÃ¡n chÆ°a hoÃ n thÃ nh thÃ nh cÃ´ng",
  "data": [
    {
      "childName": "Nguyá»…n VÄƒn Con",
      "unpaidPayments": [
        {
          "_id": "payment123",
          "className": "3A1",
          "month": 6,
          "year": 2025,
          "amountDue": 800000,
          "dueDate": "2025-06-30T00:00:00.000Z"
        }
      ]
    }
  ],
  "totalUnpaid": 800000
}
```

---

## Quáº£n LÃ½ Há»c Sinh

### 1. Táº¡o TÃ i Khoáº£n Há»c Sinh Má»›i

**ÄÆ°á»ng dáº«n:** `POST /v1/api/students`  
**MÃ´ táº£:** Táº¡o tÃ i khoáº£n há»c sinh má»›i trong há»‡ thá»‘ng  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "email": "student3@gmail.com",
  "passwordBeforeHash": "password123",
  "name": "Nguyá»…n VÄƒn Há»c Sinh",
  "gender": "Nam",
  "phoneNumber": "0748278432",
  "address": "321 ÄÆ°á»ng Há»c Sinh, TP.HCM",
  "classId": null,
  "parentId": null
}
```

### 2. Láº¥y Danh SÃ¡ch Táº¥t Cáº£ Há»c Sinh

**ÄÆ°á»ng dáº«n:** `GET /v1/api/students`  
**MÃ´ táº£:** Láº¥y danh sÃ¡ch táº¥t cáº£ há»c sinh  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "Láº¥y danh sÃ¡ch há»c sinh thÃ nh cÃ´ng",
  "data": [
    {
      "_id": "684aee9c10e24b616dccdf76",
      "userId": {
        "name": "Nguyá»…n VÄƒn A",
        "email": "student1@gmail.com"
      },
      "currentClasses": ["3A1"],
      "parentId": {
        "name": "VÃµ VÄƒn Phá»¥ Huynh"
      }
    }
  ]
}
```

### 3. Láº¥y ThÃ´ng Tin Chi Tiáº¿t Há»c Sinh

**ÄÆ°á»ng dáº«n:** `GET /v1/api/students/:studentId`  
**MÃ´ táº£:** Láº¥y thÃ´ng tin chi tiáº¿t cá»§a má»™t há»c sinh cá»¥ thá»ƒ  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`

### 4. ÄÄƒng KÃ½ Há»c Sinh VÃ o Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `POST /v1/api/students/:studentId/enroll`  
**MÃ´ táº£:** ÄÄƒng kÃ½ há»c sinh vÃ o má»™t hoáº·c nhiá»u lá»›p há»c vá»›i giáº£m giÃ¡ tÃ¹y chá»n  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "classWithDiscount": [
    {
      "classId": "684c060dae07023012bcfe22",
      "discountPercentage": 10
    },
    {
      "classId": "684c060dae07023012bcfe23",
      "discountPercentage": 0
    }
  ]
}
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "ÄÄƒng kÃ½ há»c sinh vÃ o lá»›p thÃ nh cÃ´ng",
  "data": {
    "enrolledClasses": [
      {
        "classId": "684c060dae07023012bcfe22",
        "className": "3A1",
        "discountApplied": 10,
        "feeAfterDiscount": 90000
      }
    ],
    "paymentsCreated": [
      {
        "paymentId": "payment123",
        "month": 6,
        "year": 2025,
        "amountDue": 90000
      }
    ]
  }
}
```

### 5. RÃºt Há»c Sinh Khá»i Lá»›p Há»c

**ÄÆ°á»ng dáº«n:** `POST /v1/api/students/:studentId/withdraw`  
**MÃ´ táº£:** RÃºt há»c sinh khá»i cÃ¡c lá»›p há»c Ä‘Ã£ chá»‰ Ä‘á»‹nh  
**Quyá»n truy cáº­p:** Chá»‰ Admin  
**Headers:** `Authorization: Bearer <admin_token>`  
**Äáº§u vÃ o:** JSON body

**VÃ­ dá»¥ yÃªu cáº§u:**

```json
{
  "classIds": ["684e975752f5ca689d6e8d24"]
}
```

**VÃ­ dá»¥ pháº£n há»“i:**

```json
{
  "msg": "RÃºt há»c sinh khá»i lá»›p thÃ nh cÃ´ng",
  "data": {
    "withdrawnFromClasses": [
      {
        "classId": "684e975752f5ca689d6e8d24",
        "className": "4B2"
      }
    ]
  }
}
```

---

## Luá»“ng Sá»­ Dá»¥ng API

### Luá»“ng CÃ´ng Viá»‡c HÃ ng NgÃ y Cá»§a GiÃ¡o ViÃªn

1. **ÄÄƒng nháº­p:** `POST /v1/api/login`
2. **Xem danh sÃ¡ch lá»›p:** `GET /v1/api/class` (láº¥y cÃ¡c lá»›p Ä‘Æ°á»£c phÃ¢n cÃ´ng)
3. **Táº¡o buá»•i Ä‘iá»ƒm danh:** `POST /v1/api/attendance/class/:classId`
4. **ÄÃ¡nh dáº¥u há»c sinh:** `PATCH /v1/api/attendance/:attendanceId/mark`
5. **Xem lá»‹ch sá»­ Ä‘iá»ƒm danh:** `GET /v1/api/attendance/class/:classId`

### Luá»“ng Quáº£n LÃ½ Lá»›p Há»c Cá»§a Admin

1. **ÄÄƒng nháº­p:** `POST /v1/api/login`
2. **Táº¡o giÃ¡o viÃªn:** `POST /v1/api/teachers/`
3. **Táº¡o há»c sinh:** `POST /v1/api/students`
4. **Táº¡o lá»›p há»c:** `POST /v1/api/class`
5. **ÄÄƒng kÃ½ há»c sinh:** `POST /v1/api/students/:studentId/enroll`
6. **Theo dÃµi Ä‘iá»ƒm danh:** `GET /v1/api/attendance/class/:classId`

### Luá»“ng Theo DÃµi Cá»§a Phá»¥ Huynh

1. **ÄÄƒng nháº­p:** `POST /v1/api/login`
2. **Xem lá»›p há»c cá»§a con:** `GET /v1/api/parents/:parentId/classes`
3. **Kiá»ƒm tra thanh toÃ¡n:** `GET /v1/api/parents/:parentId/payments/unpaid`

---

## Tá»•ng Há»£p Quyá»n Theo Vai TrÃ²

### ğŸ‘‘ **Admin (Quyá»n Äáº§y Äá»§)**

**Quáº£n lÃ½ ngÆ°á»i dÃ¹ng:**

- `GET /v1/api/user/` - Xem táº¥t cáº£ ngÆ°á»i dÃ¹ng
- `POST /v1/api/teachers/` - Táº¡o giÃ¡o viÃªn
- `POST /v1/api/students` - Táº¡o há»c sinh
- `POST /v1/api/parents` - Táº¡o phá»¥ huynh
- Táº¥t cáº£ cÃ¡c thao tÃ¡c cáº­p nháº­t/xÃ³a ngÆ°á»i dÃ¹ng

**Quáº£n lÃ½ lá»›p há»c:**

- `POST /v1/api/class` - Táº¡o lá»›p há»c
- `GET /v1/api/class` - Xem táº¥t cáº£ lá»›p há»c
- `GET /v1/api/class/:classId` - Xem chi tiáº¿t lá»›p
- `PATCH /v1/api/class/:classId` - Cáº­p nháº­t lá»›p
- `DELETE /v1/api/class/:classId` - ÄÃ³ng lá»›p
- `GET /v1/api/classes/available-teachers` - Xem giÃ¡o viÃªn kháº£ dá»¥ng
- `GET /v1/api/classes/available-students` - Xem há»c sinh kháº£ dá»¥ng

**Quáº£n lÃ½ Ä‘iá»ƒm danh:**

- `POST /v1/api/attendance/class/:classId` - Táº¡o Ä‘iá»ƒm danh
- `PATCH /v1/api/attendance/:attendanceId/mark` - ÄÃ¡nh dáº¥u Ä‘iá»ƒm danh
- `GET /v1/api/attendance/class/:classId` - Xem Ä‘iá»ƒm danh
- `DELETE /v1/api/attendance/:attendanceId` - XÃ³a Ä‘iá»ƒm danh

**Thao tÃ¡c há»c sinh:**

- `POST /v1/api/students/:studentId/enroll` - ÄÄƒng kÃ½ há»c sinh
- `POST /v1/api/students/:studentId/withdraw` - RÃºt há»c sinh

**Thao tÃ¡c phá»¥ huynh:**

- `PATCH /v1/api/parents/:parentId/children` - Quáº£n lÃ½ quan há»‡ phá»¥ huynh-con

### ğŸ‘©â€ğŸ« **GiÃ¡o ViÃªn (Quyá»n Giáº£ng Dáº¡y)**

**ThÃ´ng tin cÃ¡ nhÃ¢n:**

- `GET /v1/api/profile` - Xem thÃ´ng tin cÃ¡ nhÃ¢n
- `PATCH /v1/api/profile` - Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n

**Quáº£n lÃ½ lá»›p há»c:**

- `GET /v1/api/class/:classId` - Xem chi tiáº¿t lá»›p Ä‘Æ°á»£c phÃ¢n cÃ´ng

**Quáº£n lÃ½ Ä‘iá»ƒm danh:**

- `POST /v1/api/attendance/class/:classId` - Táº¡o Ä‘iá»ƒm danh cho lá»›p Ä‘Æ°á»£c phÃ¢n cÃ´ng
- `PATCH /v1/api/attendance/:attendanceId/mark` - ÄÃ¡nh dáº¥u Ä‘iá»ƒm danh há»c sinh
- `GET /v1/api/attendance/class/:classId` - Xem lá»‹ch sá»­ Ä‘iá»ƒm danh

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **Phá»¥ Huynh (Quyá»n Theo DÃµi Con)**

**ThÃ´ng tin cÃ¡ nhÃ¢n:**

- `GET /v1/api/profile` - Xem thÃ´ng tin cÃ¡ nhÃ¢n
- `PATCH /v1/api/profile` - Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n

**ThÃ´ng tin con:**

- `GET /v1/api/parents/:parentId/classes` - Xem lá»›p há»c cá»§a con
- `GET /v1/api/parents/:parentId/payments/unpaid` - Xem thanh toÃ¡n chÆ°a hoÃ n thÃ nh

**GiÃ¡o viÃªn (Háº¡n cháº¿):**

- `GET /v1/api/teachers` - Xem thÃ´ng tin giÃ¡o viÃªn (náº¿u canSeeTeacher = true)

### ğŸ“ **Há»c Sinh (Quyá»n Háº¡n Cháº¿)**

**ThÃ´ng tin cÃ¡ nhÃ¢n:**

- `GET /v1/api/profile` - Xem thÃ´ng tin cÃ¡ nhÃ¢n
- `PATCH /v1/api/profile` - Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n

**GiÃ¡o viÃªn:**

- `GET /v1/api/teachers` - Xem thÃ´ng tin giÃ¡o viÃªn

---

## Ghi ChÃº Quan Trá»ng

1. **XÃ¡c thá»±c báº¯t buá»™c:** Táº¥t cáº£ API trá»« Ä‘Äƒng nháº­p Ä‘á»u cáº§n header `Authorization: Bearer <token>`
2. **Äá»‹nh dáº¡ng token:** JWT token nháº­n Ä‘Æ°á»£c tá»« endpoint Ä‘Äƒng nháº­p
3. **Äá»‹nh dáº¡ng ngÃ y:** Sá»­ dá»¥ng DD/MM/YYYY hoáº·c YYYY-MM-DD cho input ngÃ y thÃ¡ng
4. **Pháº£n há»“i lá»—i:** Táº¥t cáº£ API tráº£ vá» lá»—i theo Ä‘á»‹nh dáº¡ng:
   ```json
   {
     "msg": "ThÃ´ng bÃ¡o lá»—i",
     "error": "MÃ´ táº£ chi tiáº¿t lá»—i"
   }
   ```
5. **PhÃ¢n trang:** Háº§u háº¿t API danh sÃ¡ch há»— trá»£ phÃ¢n trang vá»›i tham sá»‘ `page` vÃ  `limit`
6. **Bá»™ lá»c:** Nhiá»u API GET há»— trá»£ tham sá»‘ truy váº¥n Ä‘á»ƒ lá»c dá»¯ liá»‡u
7. **Tá»± Ä‘á»™ng cáº­p nháº­t:** API Ä‘iá»ƒm danh tá»± Ä‘á»™ng cáº­p nháº­t báº£n ghi thanh toÃ¡n vÃ  lÆ°Æ¡ng giÃ¡o viÃªn

## MÃ£ Tráº¡ng ThÃ¡i HTTP

- `200` - ThÃ nh cÃ´ng
- `201` - Táº¡o thÃ nh cÃ´ng
- `400` - YÃªu cáº§u khÃ´ng há»£p lá»‡ (lá»—i validation)
- `401` - ChÆ°a xÃ¡c thá»±c (thiáº¿u/sai token)
- `403` - KhÃ´ng cÃ³ quyá»n (quyá»n khÃ´ng Ä‘á»§)
- `404` - KhÃ´ng tÃ¬m tháº¥y
- `500` - Lá»—i server ná»™i bá»™
